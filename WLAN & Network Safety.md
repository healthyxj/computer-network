# 一、网络安全问题概述

## 1、威胁

计算机网络上的通信主要面临着以下四种威胁

* **截获**：从网络上窃听他人的通信内容
* **中断**：有意中断他人在网络上的通信
* **篡改**：故意篡改网络上传送的报文
* **伪造**：伪造信息在网络上传送

其中，截获信息的攻击称为被动攻击，更改信息和拒绝用户使用资源的攻击为主动攻击。



## 2、目标

计算机网络通信安全的目标为

* 防止析出**报文**内容
* 防止**通信量**分析
* 检测更改报文流
* 检测拒绝报文服务
* 检测伪造初始化连接。



## 3、恶意程序(rogue program)

计算机病毒会“传染”其他程序的程序， “传染”是通过修改其他程序来把自身或其变种复制进去完成的。

计算机蠕虫——通过网络的通信功能将自身从一个结点发送到另一个结点并启动运行的程序。 

特洛伊木马——一种程序，它执行的功能超出所声称的功能（伪装）。 

逻辑炸弹——一种当运行环境满足某种特定条件时执行其他特殊功能的程序。

## 4、计算机网络安全的内容

保密性



安全协议的设计



访问控制



# 二、密码体制

**密码编码学(cryptography)**是密码体制的设计学，而**密码分析学(cryptanalysis)**则是在未知密钥的情况下从密文推演出明文或密钥的技术。密码编码学与密码分析学合起来即为密码学 (cryptology)。

如果不论截取者获得了多少密文，但在密文中都没有足够的信息来唯一地确定出对应的明文，则这一密码体制称为**无条件安全**的，或称为理论上是不可破的。如果密码体制中的密码不能被可使用的计算资源破译，则这一密码体制称为**在计算上是安全的**。

## 1、对称密钥密码体制

常规密钥密码体制，即加密密钥与解密密钥是相同的密码体制。

### 数据加密标准

数据加密标准DES，是一种分组密码。在加密前，先对整个明文进行**分组**。每一个**组长为 64 位**。然后对每一个 64 位二进制数据进行**加密处理**， 产生一组 64 位密文数据。最后**将各组密文串接起来**，即得出整个的密文。使用的密钥为 64 位（实际密钥长度为 56 位，有 8 位用于奇偶校验)。

### DES的保密性

DES 是世界上第一个公认的实用密码算法标准， 它曾对密码学的发展做出了重大贡献。 目前较为严重的问题是 DES 的密钥的长度。

## 2、公钥密码体制

公钥密码体制使用**不同的加密密钥与解密密钥**， 是一种“由已知加密密钥推导出解密密钥在计算上是不可行的”密码体制。

公钥密码体制的产生主要是因为两个方面的原因，一是由于常规密钥密码体制的密钥分配问题， 另一是由于对数字签名的需求。

### 加密密钥与解密密钥

在公钥密码体制中，**加密密钥(即公钥)** PK 是公开信息，而解密密钥(即私钥或秘钥) SK 是**需要保密**的。加密算法和解密**算法都是公开**的。

~~~
	任何加密方法的安全性取决于密钥的长度，以及攻破密文所需的计算量。在这方面，公钥密码体制并不具有比传统加密体制更加优越之处。
	由于目前公钥加密算法的开销较大，在可见的将来还看不出来要放弃传统的加密方法。公钥还需要密钥分配协议，具体的分配过程并不比采用传统加密方法时更简单。
~~~

### 公钥算法的特点

1)发送者 A 用 B 的公钥 PKB 对明文 X 加密（E 运算）后，在接收者 B 用自己的私钥 SKB 解密（D 运算），即可恢复出明文：

DskB(Y) = DskB(EpkB(X)) = X.

2)加密和解密的运算可以对调。从已知的 PK 实际上不可能推导出 SK，即从 PK 到 SK 是“计算上不可能的”。

## 3、数字签名

数字签名需要保证三点：

* **报文鉴别**——接收者能够核实发送者对报文的签名；
* **报文的完整性**——发送者事后不能抵赖对报文的签名；
* **不可否认**——接收者不能伪造对报文的签名

### 数字签名的实现

A的明文X通过A的私钥SKA，进行加密，然后到达B，B通过A的公钥PKA核实签名就能够获得A的明文X。

### 具有保密性的数字签名

A的明文X通过A的私钥和B的公钥加密，通过因特网传输到B处。B通过B的私钥和A的公钥解密，就能够获取明文了。

## 4、鉴别

在信息的安全领域中，对付**被动攻击**的重要措施是**加密**，而对付**主动攻击**中的篡改和伪造则要用**鉴别(authentication)**。鉴别与授权(authorization)是不同的概念。授权涉及到的问题是：所进行的过程是否被**允许**（如是否可以对某文件进行读或写）。 而鉴别则是判断真伪。

### 报文鉴别

许多报文并不需要加密但却需要数字签名，以便让报文的接收者能够鉴别报文的真伪。然而对很长的报文进行数字签名会使计算机增加很大的负担（需要进行很长时间的运算）。

### 报文摘要MD

Message Digest,

A 将报文 X 经过**报文摘要算法**运算后得出很短的**报文摘要 H**。然后用自己的**私钥**对 H 进行 D 运算，即进行数字签名。得出已签名的报文摘要D(H)后，并**将其追加在报文 X 后面**发送给 B。

B收到报文后，做两件事。

* 用A的公钥对 D(H) 进行**E运算**，得出报文摘要 H 。 
* (**重复检验**)对报文 X 进行报文摘要运算，看是否能够得出同样的报文摘要 H。如一样，就能以极高的概率断定收到的报文是 A 产生的。否则就不是。

MD的优点

仅对短得多的定长报文摘要 H 进行数字签名要比对整个长报文进行数字签名要简单得多。

### 报文摘要算法

报文摘要算法就是一种**散列函数**。这种散列函数也叫做密码编码的检验和。也是一种精心选择的**单向函数**。可以很容易地计算出一个长报文 X 的报文摘要H，但要想从报文摘要 H 反过来找到原始的报文 X，则实际上是不可能的。

### 实体鉴别

实体鉴别是在系统接入的全部持续时间内对和自己通信的对方实体只需验证一次。

最简单的实体鉴别过程 

A 发送给 B 的报文的被加密，使用的是对称密钥KAB。 B 收到此报文后，用**共享对称密钥** KAB 进行解密，因而鉴别了实体 A 的身份。

漏洞

入侵者 C 可以从网络上截获 A 发给 B 的报文。C并不需要破译这个报文（因为这可能很花很多时间）而可以直接把这个由 A 加密的报文发送给 B，使 B 误认为 C 就是 A。然后 B 就向伪装是 A的 C 发送应发给 A 的报文。

**重放攻击(replay attack)**， C 甚至还可以截获 A 的 IP 地址，然后把 A 的 IP 地址冒充为自己的 IP 地址（这叫做 **IP 欺骗**），使 B 更加容易受骗。一种解决方案为不重数(nonce)，不重数就是一个不重复使用的大随机数，即一次一数。

其他的有中间人攻击。

## 5、密钥分配

目前常用的密钥分配方式是设立**密钥分配中心KDC (Key Distribution)**。

用户 A 和 B 都是 KDC 的登记用户，并已经在KDC 的服务器上安装了各自和 KDC 进行通信的**主密钥（master key）KA 和 KB**。 “主密钥”可 简称为“密钥”。

### 公钥的分配

需要有一个值得信赖的机构——即**认证中心CA(Certification Authority)**，来将公钥与其对应的实体（人或机器）进行绑定(binding)。

### 链路加密

在采用链路加密的网络中，每条通信链路上的加密是**独立实现**的。通常对每条链路使用不同的加密密钥。所有的中间结点(包括可能经过的路由器)未必都是安全的。链路加密的最大缺点是**在中间结点暴露了信息的内容**。在网络互连的情况下，仅采用链路加密是不能实现通信安全的。

### 端到端加密

端到端加密是在源结点和目的结点中对传送的PDU 进行加密和解密，报文的安全性不会因中间结点的不可靠而受到影响。

# 三、防火墙(firewall)

防火墙是由软件、硬件构成的系统，是一种**特殊编程的路由器**，用来在两个网络之间实施接入控制策略。**接入控制策略**是由使用防火墙的单位自行制订的，为的是可以最适合本单位的需要。

防火墙内的网络称为**“可信赖的网络”(trusted network)**，而将外部的因特网称为**“不可信赖的网络”(untrusted network)**。

## 1、防火墙的功能

阻止和允许。大多数服防火墙的**主要功能是阻止**。

## 2、防火墙技术

网络级防火墙——用来防止整个**网络**出现外来非法的入侵。属于这类的有**分组过滤和授权服务器**。前者检查所有流入本网络的信息，然后拒绝不符合事先制订好的一套准则的数据，而后者则是检查**用户的登录是否合法**。

应用级防火墙——从应用程序来进行接入控制。 通常使用**应用网关或代理服务器**来区分各种应用。例如，可以只允许通过访问万维网的应用，而阻止 FTP 应用的通过。

# 四、无线局域网

一个**基本服务集 BSS **包括一个**基站和若干个移动站**，所有的站在本 BSS 以内都可以直接通信，但在和本 BSS 以外的站通信时，都要通过本 BSS 的基站。

## 1、AP

基本服务器内的基站叫做**接入点AP(Access Point)**。当网络管理员安装AP时，必须为该AP分配一个不超过32字节的**服务集标识符SSID和一个信道**。

一个移动站若要加入到一个基本服务集 BSS，就必须先选择一个接入点 AP，并**与此接入点建立关联**。建立关联就表示这个移动站加入了选定的 AP 所属的子网，并和这个 AP 之间创建了一个虚拟线路。只有关联的 AP 才向这个移动站发送数据帧，而这个移动站也只有通过关联的 AP 才能向其他站点发送数据帧。

**被动扫描**，即移动站等待接收接入站周期性发出的**信标帧(beacon frame)**。 信标帧中包含有若干系统参数（如服务集标识符 SSID 以及支持的速率等）。 

主动扫描，即**移动站**主动发出**探测请求帧(probe request frame)**，然后等待从 AP 发回的探测响应帧(probe response frame)。

## 2、热点(hot spot)

能够向公众提供有偿或无偿接入Wi-Fi 的服务。这样的地点就叫做热点。



## 3、移动自组网络(ad hoc network)

自组网络是没有固定基础设施（即没有 AP）的无线局域网。这种网络由一些处于平等状态的移动站之间相互通信组成的临时网络。

几种不同的接入

* 固定接入(fixed access)——在作为网络用户期间，用户设置的地理位置保持不变。 
* **移动接入(mobility access)**——用户设置能够以车辆速度移动时进行网络通信。当发生切换时， 通信仍然是连续的。 
* 便携接入(portable access)——在受限的网络覆盖面积中，用户设备能够在以步行速度移动时进行网络通信，提供有限的切换能力。 
* 游牧接入(nomadic access)——用户设备的地理位置至少在进行网络通信时保持不变。如用户设备移动了位置，则再次进行通信时可能还要寻找最佳的基站 。

# 五、无线网络和移动网络

无线通信是无线用户通过位于网络边缘的无线链路连接进更大的网络基础设施的网络。

## 1、概述

讨论IEEE802.11这样的无线局域网和4G网络这样的蜂窝移动网络。

无线主机，主机是运行应用程序的端系统设备；无线链路，主机通过无线通信链路(wireless communication link)连接到一个基站。

![](img\无线网络的链路特性.jpg)

基站(base station)是无线网络基础设施的一个关键部分，基站负责协调与之相关联的多个无线主机的传输。当我们说一台主主机与某基站相关联时，指的是1)该主机位于该基站的**无线通信覆盖范围内**；2)该主机使用该**基站中继主机和更大网络之间的数据**。蜂窝网络的**蜂窝塔(cell tower)**和802.11无线LAN中的**接入点(access point)**都是基站的例子。

与基站关联的主机通常被称为**以基础设施模式(infrastructure mode)**运行。当一个主机移动超出某个范围，它将改变接入到更大网络的接入点，这一过程称为**切换(handoff)**。

## 2、无线链路和网络特征

用无线802.11网络代替有线以太网。会发现有线链路和无线链路之间的区别

* 递减的信号强度
  * 电磁波穿过物体时强度将减弱；即使在自由空间中，信号仍将扩散，信号会随着发送方和接收方距离的增加而减弱，称为路劲损耗(path loss)
* 来自其他源的干扰
  * 在同一频段发送信号的电波源将相互干扰。例如，2.4GHz无线电话和802.11b无线LAN在相同频段中传输。
* 多径传播

信噪比(Signal to Noise Ratio)，度量单位通常是SNR。

## 3、CDMA

**码分多址(Code Division Multiple Access)**属于信道划分协议簇。在CDMA协议中，要发送的每个比特都乘以一个信号的比特来进行编码。

为了数学上便利，将具有0值的数据比特表示为-1.每个比特时隙又进一步细分为M个微时隙。

## 4、WiFi：802.11无线LAN

IEEE802.11无线LAN，802.11产品是向后兼容的。

### 体系结构

802.11体系结构的基本构件模块是**基本服务集BSS(Basic Service Set)**.一个BSS包含一个或多个无线站点和接入点AP(Access Point)。每个无线站点都有6字节的MAC地址，该地址存储在M适配器的固件中。配置AP的无线LAN经常被称为基础设施无线LAN(infrastructure wireless LAN).

网络管理员安装AP时，就会在接入点分配一个单字或双字的**服务集标识SSID(Service Set Identifier)**.管理员还会分配一个信道号。信道1、6、11是非重叠的。

自己的无线站点需要加入一个子网，并且需要与其中的一个**AP相关联**。802.11标准要求**每个AP周期性地发送信标帧(beacon frame)**。关联意味着该无线站点与AP之间创造一个虚拟线路。

### 802.11MAC协议

该协议并没有实现碰撞检测，原因是

* 802.11适配器上，接收信号的强度通常小于发送信号的强度。
* 适配器由于隐藏终端问题和衰减问题而无法检测到所有的碰撞。

因为不使用碰撞检测，所以一旦发送帧，就会完全地发送。

802.11的链路层确认，是为了处理不可忽视的故障情况。目的站点收到一个通过CRC校验的帧后，会等待一个被称为**短帧间间隔SIFS(Short Inter-Frame Spacing)**的一小段时间。 
